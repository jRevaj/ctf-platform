# Generated by Django 5.2 on 2025-05-01 18:45

from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('auth', '0012_alter_user_first_name_max_length'),
        ('ctf', '0010_globalsettings_enable_round_time_restrictions_and_more'),
    ]

    operations = [
        migrations.AlterModelOptions(
            name='challengedeployment',
            options={'verbose_name': 'Challenge Deployment', 'verbose_name_plural': 'Challenge Deployments'},
        ),
        migrations.AlterModelOptions(
            name='challengenetworkconfig',
            options={'verbose_name': 'Challenge Network Config', 'verbose_name_plural': 'Challenge Network Configs'},
        ),
        migrations.AlterModelOptions(
            name='challengetemplate',
            options={'verbose_name': 'Challenge Template', 'verbose_name_plural': 'Challenge Templates'},
        ),
        migrations.AlterModelOptions(
            name='deploymentaccess',
            options={'ordering': ['-start_time'], 'verbose_name': 'Deployment Access', 'verbose_name_plural': 'Deployment Accesses'},
        ),
        migrations.AlterModelOptions(
            name='flag',
            options={'ordering': ['-created_at'], 'verbose_name': 'Flag', 'verbose_name_plural': 'Flags'},
        ),
        migrations.AlterModelOptions(
            name='globalsettings',
            options={'verbose_name': 'Global Settings', 'verbose_name_plural': 'Global Settings'},
        ),
        migrations.RemoveField(
            model_name='globalsettings',
            name='enable_round_time_restrictions',
        ),
        migrations.RemoveField(
            model_name='globalsettings',
            name='max_deployment_time',
        ),
        migrations.AddField(
            model_name='gamesession',
            name='enable_time_restrictions',
            field=models.BooleanField(default=False, help_text='Whether to enable time restrictions for accessing deployments'),
        ),
        migrations.AddField(
            model_name='gamesession',
            name='max_blue_team_time',
            field=models.PositiveIntegerField(default=120, help_text='Maximum time in minutes that a blue team can spend securing a deployment (0 means no limit)'),
        ),
        migrations.AddField(
            model_name='gamesession',
            name='max_red_team_time',
            field=models.PositiveIntegerField(default=0, help_text='Maximum time in minutes that a red team can spend attacking a deployment (0 means no limit)'),
        ),
        migrations.AddIndex(
            model_name='user',
            index=models.Index(fields=['username'], name='ctf_user_usernam_dd9e83_idx'),
        ),
        migrations.AddIndex(
            model_name='user',
            index=models.Index(fields=['email'], name='ctf_user_email_38ca14_idx'),
        ),
        migrations.AddIndex(
            model_name='user',
            index=models.Index(fields=['team'], name='ctf_user_team_id_819138_idx'),
        ),
    ]
